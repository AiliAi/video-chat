(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{48:function(e,n,t){},80:function(e,n,t){},88:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),o=t(39),u=t.n(o),i=(t(48),t(43)),a=t(1),s=t(90),f=t(2),d=function(e){return Object(f.jsx)("button",{onClick:function(){var n=Object(s.a)();e.history.push("/room/".concat(n))},children:"Create Room"})},l=t(40),j=t.n(l),h=function(e){var n=Object(r.useRef)(),t=Object(r.useRef)(),c=Object(r.useRef)(),o=Object(r.useRef)(),u=Object(r.useRef)(),i=Object(r.useRef)();function a(e){var n=new RTCPeerConnection({iceServers:[{urls:"stun:stun.stunprotocol.org"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]});return n.onicecandidate=l,n.ontrack=b,n.onnegotiationneeded=function(){return function(e){c.current.createOffer().then((function(e){return c.current.setLocalDescription(e)})).then((function(){var n={target:e,caller:o.current.id,sdp:c.current.localDescription};o.current.emit("offer",n)})).catch((function(e){return console.log(e)}))}(e)},n}function s(e){c.current=a();var n=new RTCSessionDescription(e.sdp);c.current.setRemoteDescription(n).then((function(){i.current.getTracks().forEach((function(e){return c.current.addTrack(e,i.current)}))})).then((function(){return c.current.createAnswer()})).then((function(e){return c.current.setLocalDescription(e)})).then((function(){var n={target:e.caller,caller:o.current.id,sdp:c.current.localDescription};o.current.emit("answer",n)}))}function d(e){var n=new RTCSessionDescription(e.sdp);c.current.setRemoteDescription(n).catch((function(e){return console.log(e)}))}function l(e){if(e.candidate){var n={target:u.current,candidate:e.candidate};o.current.emit("ice-candidate",n)}}function h(e){var n=new RTCIceCandidate(e);c.current.addIceCandidate(n).catch((function(e){return console.log(e)}))}function b(e){t.current.srcObject=e.streams[0]}return Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(t){n.current.srcObject=t,i.current=t,o.current=j.a.connect("/"),o.current.emit("join room",e.match.params.roomID),o.current.on("other user",(function(e){!function(e){c.current=a(e),i.current.getTracks().forEach((function(e){return c.current.addTrack(e,i.current)}))}(e),u.current=e})),o.current.on("user joined",(function(e){u.current=e})),o.current.on("offer",s),o.current.on("answer",d),o.current.on("ice-candidate",h)}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("video",{autoPlay:!0,ref:n}),Object(f.jsx)("video",{autoPlay:!0,ref:t})]})};t(80);var b=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(i.a,{children:Object(f.jsxs)(a.c,{children:[Object(f.jsx)(a.a,{path:"/",exact:!0,component:d}),Object(f.jsx)(a.a,{path:"/room/:roomID",component:h})]})})})},p=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,91)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,u=n.getTTFB;t(e),r(e),c(e),o(e),u(e)}))};u.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(b,{})}),document.getElementById("root")),p()}},[[88,1,2]]]);
//# sourceMappingURL=main.ec0f706a.chunk.js.map